/**
 * Fuse.js v6.6.2 - Lightweight fuzzy-search (http://fusejs.io)
 *
 * Copyright (c) 2022 Kiro Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */

!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(b="undefined"!=typeof globalThis?globalThis:b||self).Fuse=a()}(this,function(){"use strict";function q(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function c(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?q(Object(b),!0).forEach(function(a){v(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):q(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}function r(a){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function s(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function t(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function u(a,b,c){return b&&t(a.prototype,b),c&&t(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function v(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(b,"prototype",{value:Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),writable:!1}),a&&y(b,a)}function x(a){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function y(a,b){return(y=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function z(a){var b=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}();return function(){var c,d=x(a);if(b){var e=x(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return function(b,a){if(a&&("object"==typeof a||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(b)}(this,c)}}function A(a){return B(a)||C(a)||D(a)||F()}function B(a){if(Array.isArray(a))return E(a)}function C(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function D(a,c){if(a){if("string"==typeof a)return E(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(a);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return E(a,c)}}function E(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function F(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(a){return Array.isArray?Array.isArray(a):"[object Array]"===M(a)}var H=1/0;function I(a){return"string"==typeof a}function J(a){return"number"==typeof a}function K(a){return"object"===r(a)}function L(a){return!a.trim().length}function M(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}var N=Object.prototype.hasOwnProperty,O=function(){function a(b){var c=this;s(this,a),this._keys=[],this._keyMap={};var d=0;b.forEach(function(b){var a=P(b);d+=a.weight,c._keys.push(a),c._keyMap[a.id]=a,d+=a.weight}),this._keys.forEach(function(a){a.weight/=d})}return u(a,[{key:"get",value:function(a){return this._keyMap[a]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),a}();function P(a){var c=null,d=null,e=null,f=1,g=null;if(I(a)||G(a))e=a,c=Q(a),d=R(a);else{if(!N.call(a,"name"))throw new Error((i="name","Missing ".concat(i," property in key")));var i,h,b=a.name;if(e=b,N.call(a,"weight")&&(f=a.weight)<=0)throw new Error((h=b,"Property 'weight' in key '".concat(h,"' must be a positive integer")));c=Q(b),d=R(b),g=a.getFn}return{path:c,id:d,weight:f,src:e,getFn:g}}function Q(a){return G(a)?a:a.split(".")}function R(a){return G(a)?a.join("."):a}var f=c(c(c(c({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(a,b){return a.score===b.score?a.idx<b.idx?-1:1:a.score<b.score?-1:1}}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),{useExtendedSearch:!1,getFn:function(c,a){var b=[],d=!1;return!function i(g,c,e){var l;if(null!=(l=g)){if(c[e]){var j,f,k,m,a=g[c[e]];if(null==(m=a))return;if(e===c.length-1&&(I(a)||J(a)|| !0===(f=a)|| !1===f||K(j=f)&&null!==j&&"[object Boolean]"==M(f)))b.push(null==(k=a)?"":function(a){if("string"==typeof a)return a;var b=a+"";return"0"==b&&1/a== -H?"-0":b}(k));else if(G(a)){d=!0;for(var h=0,n=a.length;h<n;h+=1)i(a[h],c,e+1)}else c.length&&i(a,c,e+1)}else b.push(g)}}(c,I(a)?a.split("."):a,0),d?b:b[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}),S=/[^ ]+/g,T=function(){function a(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},c=b.getFn,e=void 0===c?f.getFn:c,d=b.fieldNormWeight,g=void 0===d?f.fieldNormWeight:d;s(this,a),this.norm=function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:3,c=new Map,d=Math.pow(10,a);return{get:function(f){var a=f.match(S).length;if(c.has(a))return c.get(a);var e=parseFloat(Math.round(1/Math.pow(a,.5*b)*d)/d);return c.set(a,e),e},clear:function(){c.clear()}}}(g,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}return u(a,[{key:"setSources",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[];this.docs=a}},{key:"setIndexRecords",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[];this.records=a}},{key:"setKeys",value:function(){var b=this,a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[];this.keys=a,this._keysMap={},a.forEach(function(a,c){b._keysMap[a.id]=c})}},{key:"create",value:function(){var a=this;!this.isCreated&&this.docs.length&&(this.isCreated=!0,I(this.docs[0])?this.docs.forEach(function(b,c){a._addString(b,c)}):this.docs.forEach(function(b,c){a._addObject(b,c)}),this.norm.clear())}},{key:"add",value:function(a){var b=this.size();I(a)?this._addString(a,b):this._addObject(a,b)}},{key:"removeAt",value:function(b){this.records.splice(b,1);for(var a=b,c=this.size();a<c;a+=1)this.records[a].i-=1}},{key:"getValueForItemAtKeyId",value:function(a,b){return a[this._keysMap[b]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(a,b){var c;if(!(null==(c=a)||L(a))){var d={v:a,i:b,n:this.norm.get(a)};this.records.push(d)}}},{key:"_addObject",value:function(c,a){var d=this,b={i:a,$:{}};this.keys.forEach(function(e,f){var g,a=e.getFn?e.getFn(c):d.getFn(c,e.path);if(null!=(g=a)){if(G(a))!function(){for(var e=[],g=[{nestedArrIndex:-1,value:a}];g.length;){var i,h=g.pop(),j=h.nestedArrIndex,c=h.value;if(null!=(i=c)){if(I(c)&&!L(c)){var k={v:c,i:j,n:d.norm.get(c)};e.push(k)}else G(c)&&c.forEach(function(a,b){g.push({nestedArrIndex:b,value:a})})}}b.$[f]=e}();else if(I(a)&&!L(a)){var h={v:a,n:d.norm.get(a)};b.$[f]=h}}}),this.records.push(b)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),a}();function g(e,g){var b=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},c=b.getFn,h=void 0===c?f.getFn:c,d=b.fieldNormWeight,i=void 0===d?f.fieldNormWeight:d,a=new T({getFn:h,fieldNormWeight:i});return a.setKeys(e.map(P)),a.setSources(g),a.create(),a}function U(k){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=a.errors,d=a.currentLocation,e=a.expectedLocation,g=a.distance,h=void 0===g?f.distance:g,i=a.ignoreLocation,l=void 0===i?f.ignoreLocation:i,b=(void 0===c?0:c)/k.length;if(l)return b;var j=Math.abs((void 0===e?0:e)-(void 0===d?0:d));return h?b+j/h:j?1:b}var V=function(){function a(g){var B=this,b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},h=b.location,t=void 0===h?f.location:h,i=b.threshold,u=void 0===i?f.threshold:i,j=b.distance,v=void 0===j?f.distance:j,k=b.includeMatches,w=void 0===k?f.includeMatches:k,l=b.findAllMatches,x=void 0===l?f.findAllMatches:l,m=b.minMatchCharLength,y=void 0===m?f.minMatchCharLength:m,n=b.isCaseSensitive,o=void 0===n?f.isCaseSensitive:n,p=b.ignoreLocation,z=void 0===p?f.ignoreLocation:p;if(s(this,a),this.options={location:t,threshold:u,distance:v,includeMatches:w,findAllMatches:x,minMatchCharLength:y,isCaseSensitive:o,ignoreLocation:z},this.pattern=o?g:g.toLowerCase(),this.chunks=[],this.pattern.length){var e=function(a,b){B.chunks.push({pattern:a,alphabet:function(c){for(var b={},a=0,d=c.length;a<d;a+=1){var e=c.charAt(a);b[e]=(b[e]||0)|1<<d-a-1}return b}(a),startIndex:b})},c=this.pattern.length;if(c>32){for(var d=0,q=c%32,A=c-q;d<A;)e(this.pattern.substr(d,32),d),d+=32;if(q){var r=c-32;e(this.pattern.substr(r),r)}}else e(this.pattern,0)}}return u(a,[{key:"searchIn",value:function(b){var d=this.options,i=d.isCaseSensitive,e=d.includeMatches;if(i||(b=b.toLowerCase()),this.pattern===b){var g={isMatch:!0,score:0};return e&&(g.indices=[[0,b.length-1]]),g}var a=this.options,l=a.location,m=a.distance,n=a.threshold,o=a.findAllMatches,p=a.minMatchCharLength,q=a.ignoreLocation,j=[],k=0,c=!1;this.chunks.forEach(function(a){var i=a.pattern,r=a.alphabet,s=a.startIndex,d=function(u,d,M){var m,e=arguments.length>3&& void 0!==arguments[3]?arguments[3]:{},A=e.location,N=void 0===A?f.location:A,B=e.distance,n=void 0===B?f.distance:B,C=e.threshold,O=void 0===C?f.threshold:C,D=e.findAllMatches,P=void 0===D?f.findAllMatches:D,E=e.minMatchCharLength,F=void 0===E?f.minMatchCharLength:E,G=e.includeMatches,H=void 0===G?f.includeMatches:G,I=e.ignoreLocation,o=void 0===I?f.ignoreLocation:I;if(d.length>32)throw new Error("Pattern length exceeds max of ".concat(32,"."));for(var h=d.length,l=u.length,a=Math.max(0,Math.min(N,l)),i=O,j=a,p=F>1||H,v=p?Array(l):[];(m=u.indexOf(d,j))> -1;)if(i=Math.min(U(d,{currentLocation:m,expectedLocation:a,distance:n,ignoreLocation:o}),i),j=m+h,p)for(var w=0;w<h;)v[m+w]=1,w+=1;j=-1;for(var q=[],x=1,r=h+l,Q=1<<h-1,g=0;g<h;g+=1){for(var s=0,c=r;s<c;)U(d,{errors:g,currentLocation:a+c,expectedLocation:a,distance:n,ignoreLocation:o})<=i?s=c:r=c,c=Math.floor((r-s)/2+s);r=c;var J=Math.max(1,a-c+1),y=P?l:Math.min(a+c,l)+h,k=Array(y+2);k[y+1]=(1<<g)-1;for(var b=y;b>=J;b-=1){var t=b-1,K=M[u.charAt(t)];if(p&&(v[t]=+!!K),k[b]=(k[b+1]<<1|1)&K,g&&(k[b]|=(q[b+1]|q[b])<<1|1|q[b+1]),k[b]&Q&&(x=U(d,{errors:g,currentLocation:t,expectedLocation:a,distance:n,ignoreLocation:o}))<=i){if(i=x,(j=t)<=a)break;J=Math.max(1,2*a-j)}}if(U(d,{errors:g+1,currentLocation:a,expectedLocation:a,distance:n,ignoreLocation:o})>i)break;q=k}var z={isMatch:j>=0,score:Math.max(.001,x)};if(p){var L=function(){for(var c=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&& void 0!==arguments[1]?arguments[1]:f.minMatchCharLength,d=[],a=-1,g=-1,b=0,i=c.length;b<i;b+=1){var h=c[b];h&& -1===a?a=b:h|| -1===a||((g=b-1)-a+1>=e&&d.push([a,g]),a=-1)}return c[b-1]&&b-a>=e&&d.push([a,b-1]),d}(v,F);L.length?H&&(z.indices=L):z.isMatch=!1}return z}(b,i,r,{location:l+s,distance:m,threshold:n,findAllMatches:o,minMatchCharLength:p,includeMatches:e,ignoreLocation:q}),g=d.isMatch,t=d.score,h=d.indices;g&&(c=!0),k+=t,g&&h&&(j=[].concat(A(j),A(h)))});var h={isMatch:c,score:c?k/this.chunks.length:1};return c&&e&&(h.indices=j),h}}]),a}(),a=function(){function a(b){s(this,a),this.pattern=b}return u(a,[{key:"search",value:function(){}}],[{key:"isMultiMatch",value:function(a){return W(a,this.multiRegex)}},{key:"isSingleMatch",value:function(a){return W(a,this.singleRegex)}}]),a}();function W(b,c){var a=b.match(c);return a?a[1]:null}var h=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(b){var a=b===this.pattern;return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"exact"}},{key:"multiRegex",get:function(){return/^="(.*)"$/}},{key:"singleRegex",get:function(){return/^=(.*)$/}}]),a}(a),i=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(a){var b=-1===a.indexOf(this.pattern);return{isMatch:b,score:b?0:1,indices:[0,a.length-1]}}}],[{key:"type",get:function(){return"inverse-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"$/}},{key:"singleRegex",get:function(){return/^!(.*)$/}}]),a}(a),j=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(b){var a=b.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function(){return"prefix-exact"}},{key:"multiRegex",get:function(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^\^(.*)$/}}]),a}(a),k=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(a){var b=!a.startsWith(this.pattern);return{isMatch:b,score:b?0:1,indices:[0,a.length-1]}}}],[{key:"type",get:function(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function(){return/^!\^(.*)$/}}]),a}(a),l=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(a){var b=a.endsWith(this.pattern);return{isMatch:b,score:b?0:1,indices:[a.length-this.pattern.length,a.length-1]}}}],[{key:"type",get:function(){return"suffix-exact"}},{key:"multiRegex",get:function(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^(.*)\$$/}}]),a}(a),m=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(a){var b=!a.endsWith(this.pattern);return{isMatch:b,score:b?0:1,indices:[0,a.length-1]}}}],[{key:"type",get:function(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function(){return/^!(.*)\$$/}}]),a}(a),d=function(b){w(a,b);var c=z(a);function a(d){var e,b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},g=b.location,o=void 0===g?f.location:g,h=b.threshold,p=void 0===h?f.threshold:h,i=b.distance,q=void 0===i?f.distance:i,j=b.includeMatches,r=void 0===j?f.includeMatches:j,k=b.findAllMatches,t=void 0===k?f.findAllMatches:k,l=b.minMatchCharLength,u=void 0===l?f.minMatchCharLength:l,m=b.isCaseSensitive,v=void 0===m?f.isCaseSensitive:m,n=b.ignoreLocation,w=void 0===n?f.ignoreLocation:n;return s(this,a),(e=c.call(this,d))._bitapSearch=new V(d,{location:o,threshold:p,distance:q,includeMatches:r,findAllMatches:t,minMatchCharLength:u,isCaseSensitive:v,ignoreLocation:w}),e}return u(a,[{key:"search",value:function(a){return this._bitapSearch.searchIn(a)}}],[{key:"type",get:function(){return"fuzzy"}},{key:"multiRegex",get:function(){return/^"(.*)"$/}},{key:"singleRegex",get:function(){return/^(.*)$/}}]),a}(a),e=function(b){w(a,b);var c=z(a);function a(b){return s(this,a),c.call(this,b)}return u(a,[{key:"search",value:function(e){for(var a,b=0,c=[],f=this.pattern.length;(a=e.indexOf(this.pattern,b))> -1;)b=a+f,c.push([a,b-1]);var d=!!c.length;return{isMatch:d,score:d?0:1,indices:c}}}],[{key:"type",get:function(){return"include"}},{key:"multiRegex",get:function(){return/^'"(.*)"$/}},{key:"singleRegex",get:function(){return/^'(.*)$/}}]),a}(a),n=[h,e,j,k,m,l,i,d],X=n.length,Y=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Z=new Set([d.type,e.type]),o=function(){function a(c){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},d=b.isCaseSensitive,e=void 0===d?f.isCaseSensitive:d,g=b.includeMatches,o=void 0===g?f.includeMatches:g,h=b.minMatchCharLength,p=void 0===h?f.minMatchCharLength:h,i=b.ignoreLocation,q=void 0===i?f.ignoreLocation:i,j=b.findAllMatches,r=void 0===j?f.findAllMatches:j,k=b.location,t=void 0===k?f.location:k,l=b.threshold,u=void 0===l?f.threshold:l,m=b.distance,v=void 0===m?f.distance:m;s(this,a),this.query=null,this.options={isCaseSensitive:e,includeMatches:o,minMatchCharLength:p,findAllMatches:r,ignoreLocation:q,location:t,threshold:u,distance:v},this.pattern=e?c:c.toLowerCase(),this.query=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};return a.split("|").map(function(l){for(var f=l.trim().split(Y).filter(function(a){return a&&!!a.trim()}),c=[],d=0,m=f.length;d<m;d+=1){for(var g=f[d],e=!1,a=-1;!e&& ++a<X;){var h=n[a],i=h.isMultiMatch(g);i&&(c.push(new h(i,b)),e=!0)}if(!e)for(a=-1;++a<X;){var j=n[a],k=j.isSingleMatch(g);if(k){c.push(new j(k,b));break}}}return c})}(this.pattern,this.options)}return u(a,[{key:"searchIn",value:function(c){var d=this.query;if(!d)return{isMatch:!1,score:1};var i=this.options,j=i.includeMatches;c=i.isCaseSensitive?c:c.toLowerCase();for(var b=0,a=[],e=0,f=0,o=d.length;f<o;f+=1){var k=d[f];a.length=0,b=0;for(var g=0,p=k.length;g<p;g+=1){var l=k[g],h=l.search(c),q=h.isMatch,m=h.indices,r=h.score;if(q){if(b+=1,e+=r,j){var s=l.constructor.type;Z.has(s)?a=[].concat(A(a),A(m)):a.push(m)}}else{e=0,b=0,a.length=0;break}}if(b){var n={isMatch:!0,score:e/b};return j&&(n.indices=a),n}}return{isMatch:!1,score:1}}}],[{key:"condition",value:function(_,a){return a.useExtendedSearch}}]),a}(),$=[];function aa(a,b){for(var c=0,e=$.length;c<e;c+=1){var d=$[c];if(d.condition(a,b))return new d(a,b)}return new V(a,b)}var ab={AND:"$and",OR:"$or"},ac={PATH:"$path",PATTERN:"$val"},ad=function(a){return!!(a[ab.AND]||a[ab.OR])},ae=function(a){return v({},ab.AND,Object.keys(a).map(function(b){return v({},b,a[b])}))};function p(a,d){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},b=c.auto,e=void 0===b||b;return ad(a)||(a=ae(a)),function j(a){var l,b=Object.keys(a),c=!!a[ac.PATH];if(!c&&b.length>1&&!ad(a))return j(ae(a));if(!G(m=a)&&K(m)&&!ad(m)){var m,h,f=c?a[ac.PATH]:b[0],g=c?a[ac.PATTERN]:a[f];if(!I(g))throw new Error((h=f,"Invalid value for key ".concat(h)));var i={keyId:R(f),pattern:g};return e&&(i.searcher=aa(g,d)),i}var k={children:[],operator:b[0]};return b.forEach(function(c){var b=a[c];G(b)&&b.forEach(function(a){k.children.push(j(a))})}),k}(a)}function af(b,c){var d,a=b.matches;c.matches=[],null!=(d=a)&&a.forEach(function(a){var d;if(null!=(d=a.indices)&&a.indices.length){var e=a.indices,f=a.value,b={indices:e,value:f};a.key&&(b.key=a.key.src),a.idx> -1&&(b.refIndex=a.idx),c.matches.push(b)}})}function ag(a,b){b.score=a.score}var b=function(){function a(b){var d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;s(this,a),this.options=c(c({},f),d),this.options.useExtendedSearch,this._keyStore=new O(this.options.keys),this.setCollection(b,e)}return u(a,[{key:"setCollection",value:function(b,a){if(this._docs=b,a&&!(a instanceof T))throw new Error("Incorrect 'index' type");this._myIndex=a||g(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(a){var b;null!=(b=a)&&(this._docs.push(a),this._myIndex.add(a))}},{key:"remove",value:function(){for(var e=arguments.length>0&& void 0!==arguments[0]?arguments[0]:function(){return!1},b=[],a=0,c=this._docs.length;a<c;a+=1){var d=this._docs[a];e(d,a)&&(this.removeAt(a),a-=1,c-=1,b.push(d))}return b}},{key:"removeAt",value:function(a){this._docs.splice(a,1),this._myIndex.removeAt(a)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(c){var g=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},e=g.limit,d=void 0===e?-1:e,a=this.options,h=a.includeMatches,i=a.includeScore,j=a.shouldSort,k=a.sortFn,l=a.ignoreFieldNorm,b=I(c)?I(this._docs[0])?this._searchStringList(c):this._searchObjectList(c):this._searchLogical(c);return function(b,c){var a=c.ignoreFieldNorm,d=void 0===a?f.ignoreFieldNorm:a;b.forEach(function(a){var b=1;a.matches.forEach(function(a){var c=a.key,g=a.norm,e=a.score,f=c?c.weight:null;b*=Math.pow(0===e&&f?Number.EPSILON:e,(f||1)*(d?1:g))}),a.score=b})}(b,{ignoreFieldNorm:l}),j&&b.sort(k),J(d)&&d> -1&&(b=b.slice(0,d)),function(e,i){var a=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},b=a.includeMatches,g=void 0===b?f.includeMatches:b,c=a.includeScore,h=void 0===c?f.includeScore:c,d=[];return g&&d.push(af),h&&d.push(ag),e.map(function(b){var a=b.idx,c={item:i[a],refIndex:a};return d.length&&d.forEach(function(a){a(b,c)}),c})}(b,this._docs,{includeMatches:h,includeScore:i})}},{key:"_searchStringList",value:function(a){var d=aa(a,this.options),b=this._myIndex.records,c=[];return b.forEach(function(b){var f,a=b.v,g=b.i,h=b.n;if(null!=(f=a)){var e=d.searchIn(a),i=e.isMatch,j=e.score,k=e.indices;i&&c.push({item:a,idx:g,matches:[{score:j,value:a,norm:h,indices:k}]})}}),c}},{key:"_searchLogical",value:function(a){var d=this,e=p(a,this.options),f=function j(a,b,g){if(!a.children){var h=a.keyId,k=a.searcher,c=d._findMatches({key:d._keyStore.get(h),value:d._myIndex.getValueForItemAtKeyId(b,h),searcher:k});return c&&c.length?[{idx:g,item:b,matches:c}]:[]}for(var e=[],f=0,l=a.children.length;f<l;f+=1){var i=j(a.children[f],b,g);if(i.length)e.push.apply(e,A(i));else if(a.operator===ab.AND)return[]}return e},b=this._myIndex.records,g={},c=[];return b.forEach(function(d){var i,b=d.$,a=d.i;if(null!=(i=b)){var h=f(e,b,a);h.length&&(g[a]||(g[a]={idx:a,item:b,matches:[]},c.push(g[a])),h.forEach(function(c){var b,d=c.matches;(b=g[a].matches).push.apply(b,A(d))}))}}),c}},{key:"_searchObjectList",value:function(b){var e=this,f=aa(b,this.options),a=this._myIndex,g=a.keys,c=a.records,d=[];return c.forEach(function(a){var h,b=a.$,i=a.i;if(null!=(h=b)){var c=[];g.forEach(function(a,d){c.push.apply(c,A(e._findMatches({key:a,value:b[d],searcher:f})))}),c.length&&d.push({idx:i,item:b,matches:c})}}),d}},{key:"_findMatches",value:function(b){var f,g=b.key,a=b.value,h=b.searcher;if(null==(f=a))return[];var d=[];if(G(a))a.forEach(function(a){var e,b=a.v,f=a.i,i=a.n;if(null!=(e=b)){var c=h.searchIn(b),j=c.isMatch,k=c.score,l=c.indices;j&&d.push({score:k,key:g,value:b,idx:f,norm:i,indices:l})}});else{var e=a.v,i=a.n,c=h.searchIn(e),j=c.isMatch,k=c.score,l=c.indices;j&&d.push({score:k,key:g,value:e,norm:i,indices:l})}return d}}]),a}();return b.version="6.6.2",b.createIndex=g,b.parseIndex=function(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},d=c.getFn,g=void 0===d?f.getFn:d,e=c.fieldNormWeight,h=void 0===e?f.fieldNormWeight:e,i=b.keys,j=b.records,a=new T({getFn:g,fieldNormWeight:h});return a.setKeys(i),a.setIndexRecords(j),a},b.config=f,b.parseQuery=p,!function(){$.push.apply($,arguments)}(o),b})
